(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(6),c=t(3),r=t(2),o=t(4),i=t.n(o),u="/api/persons",s=function(){return i.a.get(u)},d=function(e){return i.a.post(u,e)},l=function(e,n){return i.a.put("".concat(u,"/").concat(e),n)},b=function(e){return i.a.delete("".concat(u,"/").concat(e.id))},j=t(15),f=t.n(j),h=(t(38),t(0)),m=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],i=Object(r.useState)(""),u=Object(c.a)(i,2),j=u[0],f=u[1],m=Object(r.useState)(""),g=Object(c.a)(m,2),w=g[0],N=g[1],y=Object(r.useState)(""),C=Object(c.a)(y,2),k=C[0],S=C[1],A=Object(r.useState)(t),F=Object(c.a)(A,2),D=F[0],E=F[1],I=Object(r.useState)(null),J=Object(c.a)(I,2),B=J[0],L=J[1];Object(r.useEffect)((function(){s().then((function(e){t.length!==e.data.length&&o(e.data)})),E(t.filter((function(e){return e.name.toLowerCase().includes(k)})))}),[k,t]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{message:B}),Object(h.jsx)(O,{filter:k,handleFilterChange:function(e){S(e.target.value)}}),Object(h.jsx)(p,{newName:j,newNumber:w,handleNumberChange:function(e){N(e.target.value)},handleNameChange:function(e){f(e.target.value)},submit:function(e){e.preventDefault();var n="";for(var c in t)if(t[c].number===w){n=w;break}var r=!1;for(var i in t)if(t[i].name===j){r=t[i];break}if(""!==n)alert("Number has already been saved!");else if(""===j||""===w)alert("Name and Number cant be left empty");else if(r){if(window.confirm("".concat(j," is already added to the phonebook. Do you want to replace the old number with the new one?"))){var u=Object(a.a)(Object(a.a)({},r),{},{number:w});l(u.id,u).then((function(e){console.log(u),o(t.map((function(e){return e.id!==u.id?e:u}))),E(t.map((function(e){return e.id!==u.id?e:u}))),N(""),f("")}))}}else{d({name:j,number:w}).then((function(e){o(t.concat(e.data)),E(t.concat(e.data)),f(""),N(""),L({content:"Added ".concat(e.data.name),type:"success"})}))}}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(v,{displayNames:D,deleteContact:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&b(n).then((function(e){o(t.filter((function(e){return e.id!==n.id}))),E(t.filter((function(e){return e.id!==n.id})))})).catch((function(e){L({content:"Information of ".concat(n.name," has already been removed from the server"),type:"error"}),console.log(e),s().then((function(e){o(e.data)}))}))}})]})},O=function(e){var n=e.filter,t=e.handleFilterChange;return Object(h.jsxs)("p",{children:["Filter shown with ",Object(h.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.newName,t=e.newNumber,a=e.handleNameChange,c=e.handleNumberChange,r=e.submit;return Object(h.jsxs)("form",{onSubmit:r,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:n,onChange:a})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:t,onChange:c})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})},v=function(e){var n=e.displayNames,t=e.deleteContact;return Object(h.jsx)("div",{children:n.map((function(e,n){return Object(h.jsxs)("p",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},n)}))})},x=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:n.type,children:n.content})};f.a.render(Object(h.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4844ddae.chunk.js.map