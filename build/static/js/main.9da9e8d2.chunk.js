(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(3),r=n(2),i=n(4),o=n.n(i),u="http://localhost:3001/api/persons",s=function(){return o.a.get(u)},d=function(e){return o.a.post(u,e)},l=function(e,t){return o.a.put("".concat(u,"/").concat(e),t)},b=function(e){return o.a.delete("".concat(u,"/").concat(e.id))},j=n(15),h=n.n(j),f=(n(38),n(0)),m=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(""),u=Object(c.a)(o,2),j=u[0],h=u[1],m=Object(r.useState)(""),g=Object(c.a)(m,2),w=g[0],N=g[1],y=Object(r.useState)(""),C=Object(c.a)(y,2),k=C[0],S=C[1],A=Object(r.useState)(n),F=Object(c.a)(A,2),D=F[0],E=F[1],I=Object(r.useState)(null),J=Object(c.a)(I,2),B=J[0],L=J[1];Object(r.useEffect)((function(){s().then((function(e){n.length!==e.data.length&&i(e.data)})),E(n.filter((function(e){return e.name.toLowerCase().includes(k)})))}),[k,n]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(x,{message:B}),Object(f.jsx)(O,{filter:k,handleFilterChange:function(e){S(e.target.value)}}),Object(f.jsx)(p,{newName:j,newNumber:w,handleNumberChange:function(e){N(e.target.value)},handleNameChange:function(e){h(e.target.value)},submit:function(e){e.preventDefault();var t="";for(var c in n)if(n[c].number===w){t=w;break}var r=!1;for(var o in n)if(n[o].name===j){r=n[o];break}if(""!==t)alert("Number has already been saved!");else if(""===j||""===w)alert("Name and Number cant be left empty");else if(r){if(window.confirm("".concat(j," is already added to the phonebook. Do you want to replace the old number with the new one?"))){var u=Object(a.a)(Object(a.a)({},r),{},{number:w});l(r.id,u).then((function(e){i(n.map((function(e){return e.id!==u.id?e:u}))),E(n.map((function(e){return e.id!==u.id?e:u}))),N(""),h("")}))}}else{d({name:j,number:w}).then((function(e){i(n.concat(e.data)),E(n.concat(e.data)),h(""),N(""),L({content:"Added ".concat(e.data.name),type:"success"})}))}}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(v,{displayNames:D,deleteContact:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&b(t).then((function(e){i(n.filter((function(e){return e.id!==t.id}))),E(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){L({content:"Information of ".concat(t.name," has already been removed from the server"),type:"error"}),console.log(e),s().then((function(e){i(e.data)}))}))}})]})},O=function(e){var t=e.filter,n=e.handleFilterChange;return Object(f.jsxs)("p",{children:["Filter shown with ",Object(f.jsx)("input",{value:t,onChange:n})]})},p=function(e){var t=e.newName,n=e.newNumber,a=e.handleNameChange,c=e.handleNumberChange,r=e.submit;return Object(f.jsxs)("form",{onSubmit:r,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:t,onChange:a})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:n,onChange:c})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Add"})})]})},v=function(e){var t=e.displayNames,n=e.deleteContact;return Object(f.jsx)("div",{children:t.map((function(e,t){return Object(f.jsxs)("p",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})]},t)}))})},x=function(e){var t=e.message;return null===t?null:Object(f.jsx)("div",{className:t.type,children:t.content})};h.a.render(Object(f.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9da9e8d2.chunk.js.map