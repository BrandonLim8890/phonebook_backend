{"version":3,"sources":["personService.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","person","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","displayNames","setDisplayNames","notificationMessage","setNotificationMessage","useEffect","personService","then","res","length","data","name","toLowerCase","includes","message","handleFilterChange","event","target","value","handleNumberChange","handleNameChange","submit","preventDefault","found","i","number","updatePerson","alert","window","confirm","newPerson","console","log","map","concat","content","type","deleteContact","delPerson","find","catch","error","Filter","onChange","PersonForm","onSubmit","Persons","onClick","Notification","className","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4844ddae.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n\treturn axios.get(baseUrl)\n}\n\nconst create = (newObject) => {\n\treturn axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n\treturn axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst deleteContact = (person) => {\n\treturn axios.delete(`${baseUrl}/${person.id}`)\n}\n\nexport default { getAll, create, update, deleteContact }\n","import React, { useState, useEffect } from 'react'\nimport personService from './personService'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\nconst App = () => {\n\tconst [persons, setPersons] = useState([])\n\tconst [newName, setNewName] = useState('')\n\tconst [newNumber, setNewNumber] = useState('')\n\tconst [filter, setFilter] = useState('')\n\tconst [displayNames, setDisplayNames] = useState(persons)\n\tconst [notificationMessage, setNotificationMessage] = useState(null)\n\n\tuseEffect(() => {\n\t\tpersonService.getAll().then((res) => {\n\t\t\tif (persons.length !== res.data.length) {\n\t\t\t\tsetPersons(res.data)\n\t\t\t}\n\t\t})\n\t\tsetDisplayNames(\n\t\t\tpersons.filter((person) => {\n\t\t\t\treturn person.name.toLowerCase().includes(filter)\n\t\t\t})\n\t\t)\n\t}, [filter, persons])\n\n\tconst handleNameChange = (event) => {\n\t\tsetNewName(event.target.value)\n\t}\n\n\tconst handleNumberChange = (event) => {\n\t\tsetNewNumber(event.target.value)\n\t}\n\n\tconst handleFilterChange = (event) => {\n\t\tsetFilter(event.target.value)\n\t}\n\n\tconst submit = (event) => {\n\t\tevent.preventDefault()\n\n\t\t// Checks if person with number already exists\n\t\tlet found = ''\n\t\tfor (let i in persons) {\n\t\t\tif (persons[i].number === newNumber) {\n\t\t\t\tfound = newNumber\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\t// Checks for an update\n\t\tlet updatePerson = false\n\t\tfor (let i in persons) {\n\t\t\tif (persons[i].name === newName) {\n\t\t\t\tupdatePerson = persons[i]\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tif (found !== '') {\n\t\t\talert('Number has already been saved!')\n\t\t} else if (newName === '' || newNumber === '') {\n\t\t\talert('Name and Number cant be left empty')\n\t\t} else if (updatePerson) {\n\t\t\tconst update = window.confirm(\n\t\t\t\t`${newName} is already added to the phonebook. Do you want to replace the old number with the new one?`\n\t\t\t)\n\t\t\tif (update) {\n\t\t\t\tconst newPerson = { ...updatePerson, number: newNumber }\n\t\t\t\tpersonService.update(newPerson.id, newPerson).then((newObject) => {\n\t\t\t\t\tconsole.log(newPerson)\n\t\t\t\t\tsetPersons(persons.map((person) => (person.id !== newPerson.id ? person : newPerson)))\n\t\t\t\t\tsetDisplayNames(persons.map((person) => (person.id !== newPerson.id ? person : newPerson)))\n\t\t\t\t\tsetNewNumber('')\n\t\t\t\t\tsetNewName('')\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\t// Person not found, creates new person\n\t\t\tconst newPerson = { name: newName, number: newNumber }\n\n\t\t\tpersonService.create(newPerson).then((newObject) => {\n\t\t\t\tsetPersons(persons.concat(newObject.data))\n\t\t\t\tsetDisplayNames(persons.concat(newObject.data))\n\t\t\t\tsetNewName('')\n\t\t\t\tsetNewNumber('')\n\t\t\t\tsetNotificationMessage({ content: `Added ${newObject.data.name}`, type: 'success' })\n\t\t\t})\n\t\t}\n\t}\n\n\tconst deleteContact = (id) => {\n\t\tconst delPerson = persons.find((person) => person.id === id)\n\t\tconst del = window.confirm(`Are you sure you want to delete ${delPerson.name}?`)\n\t\tif (del) {\n\t\t\tpersonService\n\t\t\t\t.deleteContact(delPerson)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tsetPersons(persons.filter((person) => person.id !== delPerson.id))\n\t\t\t\t\tsetDisplayNames(persons.filter((person) => person.id !== delPerson.id))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tsetNotificationMessage({\n\t\t\t\t\t\tcontent: `Information of ${delPerson.name} has already been removed from the server`,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t})\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\tpersonService.getAll().then((res) => {\n\t\t\t\t\t\tsetPersons(res.data)\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Notification message={notificationMessage} />\n\t\t\t<Filter filter={filter} handleFilterChange={handleFilterChange} />\n\t\t\t<PersonForm\n\t\t\t\tnewName={newName}\n\t\t\t\tnewNumber={newNumber}\n\t\t\t\thandleNumberChange={handleNumberChange}\n\t\t\t\thandleNameChange={handleNameChange}\n\t\t\t\tsubmit={submit}\n\t\t\t/>\n\t\t\t<h2>Numbers</h2>\n\t\t\t<Persons displayNames={displayNames} deleteContact={deleteContact} />\n\t\t</div>\n\t)\n}\n\nconst Filter = ({ filter, handleFilterChange }) => {\n\treturn (\n\t\t<p>\n\t\t\tFilter shown with <input value={filter} onChange={handleFilterChange} />\n\t\t</p>\n\t)\n}\n\nconst PersonForm = ({ newName, newNumber, handleNameChange, handleNumberChange, submit }) => {\n\treturn (\n\t\t<form onSubmit={submit}>\n\t\t\t<div>\n\t\t\t\tname: <input value={newName} onChange={handleNameChange} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tnumber: <input value={newNumber} onChange={handleNumberChange} />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type='submit'>Add</button>\n\t\t\t</div>\n\t\t</form>\n\t)\n}\n\nconst Persons = ({ displayNames, deleteContact }) => {\n\treturn (\n\t\t<div>\n\t\t\t{displayNames.map((person, i) => (\n\t\t\t\t<p key={i}>\n\t\t\t\t\t{person.name} {person.number} <button onClick={() => deleteContact(person.id)}>delete</button>\n\t\t\t\t</p>\n\t\t\t))}\n\t\t</div>\n\t)\n}\n\nconst Notification = ({ message }) => {\n\tif (message === null) {\n\t\treturn null\n\t}\n\n\treturn <div className={message.type}>{message.content}</div>\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}