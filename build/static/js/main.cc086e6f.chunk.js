(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(3),r=n(2),o=n(4),i=n.n(o),u="/api/persons",s=function(){return i.a.get(u)},d=function(e){return i.a.post(u,e)},b=function(e,t){return i.a.put("".concat(u,"/").concat(e),t)},l=function(e){return i.a.delete("".concat(u,"/").concat(e.id))},j=n(15),f=n.n(j),h=(n(38),n(0)),m=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(""),u=Object(c.a)(i,2),j=u[0],f=u[1],m=Object(r.useState)(""),g=Object(c.a)(m,2),w=g[0],y=g[1],N=Object(r.useState)(""),C=Object(c.a)(N,2),k=C[0],S=C[1],A=Object(r.useState)(n),F=Object(c.a)(A,2),D=F[0],E=F[1],I=Object(r.useState)(null),J=Object(c.a)(I,2),B=J[0],L=J[1];Object(r.useEffect)((function(){s().then((function(e){n.length!==e.data.length&&o(e.data)})),E(n.filter((function(e){return e.name.toLowerCase().includes(k)})))}),[k,n]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{message:B}),Object(h.jsx)(O,{filter:k,handleFilterChange:function(e){S(e.target.value)}}),Object(h.jsx)(p,{newName:j,newNumber:w,handleNumberChange:function(e){y(e.target.value)},handleNameChange:function(e){f(e.target.value)},submit:function(e){e.preventDefault();var t="";for(var c in n)if(n[c].number===w){t=w;break}var r=!1;for(var i in n)if(n[i].name===j){r=n[i];break}if(""!==t)alert("Number has already been saved!");else if(""===j||""===w)alert("Name and Number cant be left empty");else if(r){if(window.confirm("".concat(j," is already added to the phonebook. Do you want to replace the old number with the new one?"))){var u=Object(a.a)(Object(a.a)({},r),{},{number:w});b(u.id,u).then((function(e){o(n.map((function(e){return e.id!==u.id?e:u}))),E(n.map((function(e){return e.id!==u.id?e:u}))),y(""),f("")}))}}else{d({name:j,number:w}).then((function(e){o(n.concat(e.data)),E(n.concat(e.data)),f(""),y(""),L({content:"Added ".concat(e.data.name),type:"success"})})).catch((function(e){L({content:e.response.data,type:"error"})}))}}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(v,{displayNames:D,deleteContact:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&l(t).then((function(e){o(n.filter((function(e){return e.id!==t.id}))),E(n.filter((function(e){return e.id!==t.id}))),L({content:"".concat(t.name," has been deleted"),type:"success"})})).catch((function(e){L({content:"Information of ".concat(t.name," has already been removed from the server"),type:"error"}),console.log(e),s().then((function(e){o(e.data)}))}))}})]})},O=function(e){var t=e.filter,n=e.handleFilterChange;return Object(h.jsxs)("p",{children:["Filter shown with ",Object(h.jsx)("input",{value:t,onChange:n})]})},p=function(e){var t=e.newName,n=e.newNumber,a=e.handleNameChange,c=e.handleNumberChange,r=e.submit;return Object(h.jsxs)("form",{onSubmit:r,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:t,onChange:a})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:n,onChange:c})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})},v=function(e){var t=e.displayNames,n=e.deleteContact;return Object(h.jsx)("div",{children:t.map((function(e,t){return Object(h.jsxs)("p",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{onClick:function(){return n(e.id)},children:"delete"})]},t)}))})},x=function(e){var t=e.message;return null===t?null:Object(h.jsx)("div",{className:t.type,children:t.content})};f.a.render(Object(h.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.cc086e6f.chunk.js.map